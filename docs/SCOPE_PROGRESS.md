# iroas-boss-v2 開発進捗状況

## 📊 プロジェクト進捗率
**現在の進捗**: 7/22 ステップ完了 (31.8%)

## 実装計画と環境設定
iroas-boss-v2の開発は以下のフローに沿って進行します：

| ステップ | 状態 | 解説 |
|---------|------|------|
| 0. プロジェクト作成 | ✅ 完了 | 🚀 あなたの夢の第一歩！プロジェクトの土台を整え、これから始まる冒険の準備が整いました |
| 1. 要件定義のヒアリング | ✅ 完了 | 💡 あなたのアイデアを形に！思い描いているビジョンを一緒に言葉にしていきます |
| 2. 要件定義書の作成 | ✅ 完了 | 📋 夢を設計図に変換！プロジェクトの羅針盤となる大切な文書を作成します |
| 3. 4つのデザイン候補作成 | ✅ 完了 | 🎨 ワクワクする瞬間！4つの魅力的なデザインからあなた好みの一つを選べます |
| 4. デザインシステム作成 | ✅ 完了 | 🎯 統一感のある美しさを！選んだデザインを全体に行き渡らせる魔法をかけます |
| 5. 全モックアップ作成 | ✅ 完了 | 👀 ついに姿が見えてきた！実際の画面イメージで夢が現実味を帯びてきます |
| 6. モックアップフィードバック | ⬜ 未開始 | ✨ ユーザー体験の最適化！フィードバックを基にさらに磨き上げます |
| 7. 環境変数設定 | ✅ 完了 | 🔑 3つの環境を整備！.env.local/.env.staging/.env.productionを設定します |
| 8. 実装計画策定 | ⬜ 未開始 | 📅 成功への道筋を描く！並列実行可能なPhase分けと実装ロードマップを作成します |
| 9. データモデル設計 | ⬜ 未開始 | 🗃️ データの基盤構築！SQLAlchemyモデルとマイグレーションを作成します |
| 10. API契約定義 | ⬜ 未開始 | 📄 FastAPIエンドポイント設計！Pydanticスキーマで型安全な契約を作成します |
| 11. サービス層実装 | ⬜ 未開始 | ⚙️ ビジネスロジック構築！実データで動作する処理とテストを作成します |
| 12. テスト動作保証 | ⬜ 未開始 | ✅ 実データ主義！モックなしで全テストを通過させます |
| 13. 品質検証 | ⬜ 未開始 | 🛡️ 品質の守護者！誤魔化しのない本物の動作を検証します |
| 14. 連鎖APIテスト | ⬜ 未開始 | 🔗 エンドツーエンド検証！複数APIの連携動作をテストします |
| 15. 連鎖API動作保証 | ⬜ 未開始 | 🎯 統合動作の確認！実際のユーザーフローで動作を保証します |
| 16. 環境セットアップ&基盤構築 | ⬜ 未開始 | 🏗️ フロントエンド基盤！OpenAPI接続とルーティング設定を構築します |
| 17. フロントエンド実装 | ⬜ 未開始 | 🎭 画面実装！モックアップとAPIを統合して機能するページを作成します |
| 18. ブラウザ動作検証 | ⬜ 未開始 | 🌐 Playwright検証！実際のブラウザで全エンドポイントの動作を確認します |
| 19. デプロイ環境構築 | ⬜ 未開始 | 🚀 3環境構築！本番・ステージング・開発環境を整備します |
| 20. CI/CD構築 | ⬜ 未開始 | ⚡ 自動化の魔法！GitHub Actionsで継続的デプロイを実現します |
| 21. 認証機能追加 | ⬜ 未開始 | 🔐 セキュア機能！必要に応じて認証・認可システムを追加します |

## 🎨 デザインテーマ
**選択テーマ**: エンタープライズ
- カラー: ネイビーブルー基調
- 特徴: 信頼感のある企業向けデザイン  
- 効果: 操作ミスを防ぐ堅実なUI

## 📝 プロジェクト固有の規則
- 会員数: 最大50名（新規募集なし）
- 固定料金: ヒーロープラン10,670円、テストプラン9,800円
- 報酬計算: 月次（毎月25日頃）
- 最低振込金額: 5,000円（未満は翌月繰越）

## 🔧 技術スタック
- フロントエンド: React 18 + Vite 5 + TypeScript 5 + MUI v7
- バックエンド: Python 3.11+ + FastAPI + SQLAlchemy 2.0
- データベース: PostgreSQL 15+
- インフラ: Vercel（Frontend） + GCP Cloud Run（Backend）

## 📌 重要な決定事項
- 認証機能は初期開発では実装せず、Phase 21で追加
- CSVエンコーディングはShift-JIS対応必須
- 退会処理は自動圧縮ではなく手動調整方式

## 📋 統合ページ管理表

| ID | ページ名 | ルート | 統合機能 | モックアップ | 実装 |
|----|---------|-------|---------|------------|------|
| P-001 | ダッシュボード | `/` | メニューナビゲーション | ✅ | [ ] |
| P-002 | 会員管理 | `/members` | 一覧、詳細、編集、退会、組織調整 | ✅ | [ ] |
| P-003 | 組織図ビューア | `/organization` | ツリー表示、階層確認 | [ ] | [ ] |
| P-004 | 決済管理 | `/payments` | CSV出力、結果取込、手動記録 | ✅ | [ ] |
| P-005 | 報酬計算 | `/rewards` | 7種類ボーナス計算、個人別内訳 | ✅ | [ ] |
| P-006 | 報酬支払管理 | `/payouts` | GMO CSV出力、繰越管理 | ✅ | [ ] |
| P-007 | アクティビティログ | `/activity` | 操作履歴、フィルタリング | ✅ | [ ] |
| P-008 | マスタ設定 | `/settings` | 固定値確認、最小設定 | ✅ | [ ] |
| P-009 | データ入出力 | `/data` | インポート、バックアップ | ✅ | [ ] |

## 📊 バックエンド進捗表（FastAPIエンドポイント単位）

| 番号 | エンドポイント | HTTPメソッド | 説明 | 対応ページ | 実装 |
|------|--------------|-------------|------|----------|------|
| 1.1 | `/api/members` | GET | 会員一覧取得 | P-002 | [ ] |
| 1.2 | `/api/members` | POST | 新規会員登録 | P-002 | [ ] |
| 1.3 | `/api/members/{id}` | GET | 会員詳細取得 | P-002 | [ ] |
| 1.4 | `/api/members/{id}` | PUT | 会員情報更新 | P-002 | [ ] |
| 1.5 | `/api/members/{id}` | DELETE | 会員退会処理 | P-002 | [ ] |
| 1.6 | `/api/members/search` | GET | 会員検索 | P-002 | [ ] |
| 1.7 | `/api/members/{id}/sponsor` | PUT | スポンサー変更 | P-002 | [ ] |
| 2.1 | `/api/organization/tree` | GET | 組織ツリー取得 | P-003 | [ ] |
| 2.2 | `/api/organization/tree/{id}` | GET | 特定会員配下取得 | P-003 | [ ] |
| 2.3 | `/api/organization/member/{id}/downline` | GET | 直下メンバー一覧 | P-003 | [ ] |
| 3.1 | `/api/payments/targets/card` | GET | カード決済対象者 | P-004 | [ ] |
| 3.2 | `/api/payments/targets/transfer` | GET | 口座振替対象者 | P-004 | [ ] |
| 3.3 | `/api/payments/export/card` | POST | カード決済CSV出力 | P-004 | [ ] |
| 3.4 | `/api/payments/export/transfer` | POST | 口座振替CSV出力 | P-004 | [ ] |
| 3.5 | `/api/payments/import/result` | POST | 決済結果取込 | P-004 | [ ] |
| 3.6 | `/api/payments/manual` | POST | 手動決済記録 | P-004 | [ ] |
| 3.7 | `/api/payments/history` | GET | 決済履歴 | P-004 | [ ] |
| 4.1 | `/api/rewards/check-prerequisites` | GET | 計算前提条件確認 | P-005 | [ ] |
| 4.2 | `/api/rewards/calculate` | POST | 報酬計算実行 | P-005 | [ ] |
| 4.3 | `/api/rewards/results/{id}` | GET | 計算結果取得 | P-005 | [ ] |
| 4.4 | `/api/rewards/results/{id}/member/{mid}` | GET | 個人別内訳 | P-005 | [ ] |
| 4.5 | `/api/rewards/results/{id}` | DELETE | 計算結果削除 | P-005 | [ ] |
| 4.6 | `/api/rewards/history` | GET | 計算履歴 | P-005 | [ ] |
| 5.1 | `/api/payments/reward-summary` | GET | 支払対象者一覧 | P-006 | [ ] |
| 5.2 | `/api/payments/export/gmo` | POST | GMO CSV出力 | P-006 | [ ] |
| 5.3 | `/api/payments/confirm` | POST | 支払確定 | P-006 | [ ] |
| 5.4 | `/api/payments/carryover` | GET | 繰越一覧 | P-006 | [ ] |
| 6.1 | `/api/activity/logs` | GET | ログ一覧 | P-007 | [ ] |
| 6.2 | `/api/activity/logs/filter` | GET | ログ検索 | P-007 | [ ] |
| 6.3 | `/api/activity/logs/{id}` | GET | ログ詳細 | P-007 | [ ] |
| 7.1 | `/api/settings/system` | GET | システム設定 | P-008 | [ ] |
| 7.2 | `/api/settings/business-rules` | GET | ビジネスルール | P-008 | [ ] |
| 8.1 | `/api/data/import/members` | POST | 会員インポート | P-009 | [ ] |
| 8.2 | `/api/data/backup` | POST | バックアップ実行 | P-009 | [ ] |
| 8.3 | `/api/data/backups` | GET | バックアップ一覧 | P-009 | [ ] |
| 8.4 | `/api/data/restore/{id}` | POST | リストア実行 | P-009 | [ ] |