<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P-002 会員管理 | IROAS BOSS v2</title>
    <link href="https://cdn.jsdelivr.net/npm/material-icons@1.13.12/iconfilled.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/material-ui/5.14.20/material-ui.min.css" rel="stylesheet">
    <style>
        /* デザインシステム CSS変数 */
        :root {
            /* プライマリカラー */
            --primary: #1e3a8a;
            --primary-hover: #1e40af;
            --primary-light: #3b82f6;
            
            /* セカンダリカラー */
            --secondary: #3b82f6;
            --secondary-hover: #2563eb;
            --secondary-light: #60a5fa;
            
            /* ニュートラルカラー */
            --background: #f1f5f9;
            --surface: #ffffff;
            --text-primary: #1e293b;
            --text-secondary: #475569;
            --text-muted: #64748b;
            --border: #cbd5e1;
            --border-light: #e2e8f0;
            
            /* セマンティックカラー */
            --success: #10b981;
            --success-bg: #f0fdf4;
            --warning: #f59e0b;
            --warning-bg: #fffbeb;
            --error: #ef4444;
            --error-bg: #fef2f2;
            --info: #3b82f6;
            --info-bg: #eff6ff;
            
            /* フォント */
            --font-primary: 'Inter', 'Noto Sans JP', -apple-system, BlinkMacSystemFont, sans-serif;
            --font-mono: 'Fira Code', 'JetBrains Mono', 'Consolas', monospace;
            
            /* スペーシング */
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --spacing-2xl: 3rem;
            
            /* フォントサイズ */
            --text-xs: 0.75rem;
            --text-sm: 0.875rem;
            --text-base: 1rem;
            --text-lg: 1.125rem;
            --text-xl: 1.25rem;
            --text-2xl: 1.5rem;
            --text-3xl: 1.875rem;
            
            /* トランジション */
            --transition-base: all 0.2s ease;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: var(--font-primary);
            background: var(--background);
            color: var(--text-primary);
            line-height: 1.6;
        }
        
        /* レイアウトコンテナ */
        .app-layout {
            display: flex;
            min-height: 100vh;
        }
        
        /* サイドバー */
        .sidebar {
            background: var(--surface);
            border-right: 1px solid var(--border);
            width: 280px;
            padding: var(--spacing-lg);
            overflow-y: auto;
            flex-shrink: 0;
        }
        
        .logo {
            font-size: var(--text-xl);
            font-weight: 700;
            color: var(--primary);
            margin-bottom: var(--spacing-2xl);
            text-decoration: none;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .menu-section {
            font-size: var(--text-xs);
            font-weight: 600;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin: var(--spacing-xl) 0 var(--spacing-sm) 0;
        }
        
        .menu-item a {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            padding: var(--spacing-sm) var(--spacing-md);
            border-radius: 6px;
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            transition: var(--transition-base);
            margin-bottom: var(--spacing-xs);
        }
        
        .menu-item a:hover {
            background: var(--border-light);
            color: var(--text-primary);
        }
        
        .menu-item a.active {
            background: var(--primary);
            color: white;
        }
        
        /* メインコンテンツ */
        .main-content {
            flex: 1;
            padding: var(--spacing-2xl);
            overflow-x: auto;
        }
        
        /* ページヘッダー */
        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-2xl);
        }
        
        .page-title {
            font-size: var(--text-3xl);
            font-weight: 700;
            color: var(--text-primary);
        }
        
        .page-actions {
            display: flex;
            gap: var(--spacing-md);
            align-items: center;
        }
        
        /* ボタンスタイル */
        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: var(--text-base);
            cursor: pointer;
            transition: var(--transition-base);
            display: inline-flex;
            align-items: center;
            gap: var(--spacing-sm);
            text-decoration: none;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background: var(--primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(30, 58, 138, 0.25);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        
        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }
        
        /* 検索・フィルター */
        .search-filters {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-2xl);
        }
        
        .filter-row {
            display: flex;
            gap: var(--spacing-lg);
            align-items: center;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        .filter-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .filter-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: var(--text-base);
            background: var(--surface);
            transition: var(--transition-base);
        }
        
        .filter-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(30, 58, 138, 0.1);
        }
        
        .filter-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: var(--text-base);
            background: var(--surface);
            cursor: pointer;
        }
        
        /* 会員一覧テーブル */
        .members-table-container {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: 12px;
            overflow: hidden;
        }
        
        .table-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-title {
            font-size: var(--text-xl);
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .table-meta {
            font-size: var(--text-sm);
            color: var(--text-muted);
        }
        
        .members-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .members-table th,
        .members-table td {
            padding: var(--spacing-md);
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }
        
        .members-table th {
            background: var(--background);
            font-weight: 600;
            color: var(--text-primary);
            font-size: var(--text-sm);
            position: sticky;
            top: 0;
        }
        
        .members-table tr:hover {
            background: var(--background);
        }
        
        /* ステータスバッジ */
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: var(--text-xs);
            font-weight: 500;
            text-align: center;
        }
        
        .status-active {
            background: var(--success-bg);
            color: var(--success);
            border: 1px solid var(--success);
        }
        
        .status-inactive {
            background: var(--warning-bg);
            color: var(--warning);
            border: 1px solid var(--warning);
        }
        
        .status-withdrawn {
            background: var(--error-bg);
            color: var(--error);
            border: 1px solid var(--error);
        }
        
        /* タイトルバッジ */
        .title-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: var(--text-xs);
            font-weight: 500;
            background: var(--info-bg);
            color: var(--info);
        }
        
        /* アクションボタン */
        .action-buttons {
            display: flex;
            gap: var(--spacing-sm);
        }
        
        .btn-small {
            padding: 6px 12px;
            font-size: var(--text-sm);
        }
        
        .btn-icon {
            padding: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* 詳細モーダル（シンプル版） */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        
        .modal.show {
            display: flex;
        }
        
        .modal-content {
            background: var(--surface);
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .modal-header {
            padding: var(--spacing-lg);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-title {
            font-size: var(--text-xl);
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: var(--text-xl);
            cursor: pointer;
            color: var(--text-muted);
        }
        
        .modal-body {
            padding: var(--spacing-lg);
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-lg);
        }
        
        .form-group {
            margin-bottom: var(--spacing-lg);
        }
        
        .form-label {
            display: block;
            font-size: var(--text-sm);
            font-weight: 500;
            color: var(--text-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: var(--text-base);
            background: var(--surface);
        }
        
        /* レスポンシブ */
        @media (max-width: 768px) {
            .app-layout {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
                padding: var(--spacing-md);
            }
            
            .main-content {
                padding: var(--spacing-lg);
            }
            
            .page-header {
                flex-direction: column;
                gap: var(--spacing-md);
                align-items: flex-start;
            }
            
            .filter-row {
                flex-direction: column;
            }
            
            .members-table-container {
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <div class="app-layout">
        <!-- サイドバーナビゲーション -->
        <aside class="sidebar">
            <a href="/" class="logo">IROAS BOSS v2</a>
            
            <ul class="sidebar-menu">
                <li class="menu-section">メイン機能</li>
                <li class="menu-item">
                    <a href="/">
                        <span class="material-icons">dashboard</span>
                        ダッシュボード
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/members" class="active">
                        <span class="material-icons">people</span>
                        会員管理
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/organization">
                        <span class="material-icons">account_tree</span>
                        組織図
                    </a>
                </li>
                
                <li class="menu-section">決済・報酬</li>
                <li class="menu-item">
                    <a href="/payments">
                        <span class="material-icons">credit_card</span>
                        決済管理
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/rewards">
                        <span class="material-icons">calculate</span>
                        報酬計算
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/payouts">
                        <span class="material-icons">account_balance</span>
                        支払管理
                    </a>
                </li>
                
                <li class="menu-section">システム</li>
                <li class="menu-item">
                    <a href="/activity">
                        <span class="material-icons">history</span>
                        アクティビティログ
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/settings">
                        <span class="material-icons">settings</span>
                        設定
                    </a>
                </li>
                <li class="menu-item">
                    <a href="/data">
                        <span class="material-icons">cloud_upload</span>
                        データ入出力
                    </a>
                </li>
            </ul>
        </aside>
        
        <!-- メインコンテンツ -->
        <main class="main-content">
            <header class="page-header">
                <h1 class="page-title">会員管理</h1>
                <div class="page-actions">
                    <button class="btn btn-secondary" onclick="exportMembers()">
                        <span class="material-icons">download</span>
                        エクスポート
                    </button>
                    <button class="btn btn-primary" onclick="showAddMemberModal()">
                        <span class="material-icons">add</span>
                        新規会員登録
                    </button>
                </div>
            </header>
            
            <!-- 検索・フィルター -->
            <div class="search-filters">
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label">検索キーワード</label>
                        <input type="text" class="filter-input" placeholder="会員番号、氏名、メールアドレスで検索" oninput="filterMembers(this.value)">
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ステータス</label>
                        <select class="filter-select" onchange="filterByStatus(this.value)">
                            <option value="">すべて</option>
                            <option value="アクティブ">アクティブ</option>
                            <option value="休会中">休会中</option>
                            <option value="退会済">退会済</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">プラン</label>
                        <select class="filter-select" onchange="filterByPlan(this.value)">
                            <option value="">すべて</option>
                            <option value="ヒーロープラン">ヒーロープラン</option>
                            <option value="テストプラン">テストプラン</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">決済方法</label>
                        <select class="filter-select" onchange="filterByPayment(this.value)">
                            <option value="">すべて</option>
                            <option value="カード決済">カード決済</option>
                            <option value="口座振替">口座振替</option>
                            <option value="銀行振込">銀行振込</option>
                            <option value="インフォカート">インフォカート</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <!-- 会員一覧テーブル -->
            <div class="members-table-container">
                <div class="table-header">
                    <h2 class="table-title">会員一覧</h2>
                    <div class="table-meta">全50名中50名表示</div>
                </div>
                
                <table class="members-table">
                    <thead>
                        <tr>
                            <th>会員番号</th>
                            <th>氏名</th>
                            <th>ステータス</th>
                            <th>称号</th>
                            <th>プラン</th>
                            <th>決済方法</th>
                            <th>登録日</th>
                            <th>アクション</th>
                        </tr>
                    </thead>
                    <tbody id="membersTableBody">
                        <!-- サンプルデータ -->
                        <tr>
                            <td><span class="font-mono">0000001</span></td>
                            <td>田中 太郎</td>
                            <td><span class="status-badge status-active">アクティブ</span></td>
                            <td><span class="title-badge">キング</span></td>
                            <td>ヒーロープラン</td>
                            <td>カード決済</td>
                            <td>2024/01/15</td>
                            <td class="action-buttons">
                                <button class="btn btn-secondary btn-small btn-icon" onclick="viewMember('0000001')" title="詳細表示">
                                    <span class="material-icons">visibility</span>
                                </button>
                                <button class="btn btn-primary btn-small btn-icon" onclick="editMember('0000001')" title="編集">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button class="btn btn-secondary btn-small btn-icon" onclick="adjustOrganization('0000001')" title="組織調整">
                                    <span class="material-icons">account_tree</span>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="font-mono">0000002</span></td>
                            <td>佐藤 花子</td>
                            <td><span class="status-badge status-active">アクティブ</span></td>
                            <td><span class="title-badge">クイーン</span></td>
                            <td>ヒーロープラン</td>
                            <td>口座振替</td>
                            <td>2024/01/20</td>
                            <td class="action-buttons">
                                <button class="btn btn-secondary btn-small btn-icon" onclick="viewMember('0000002')" title="詳細表示">
                                    <span class="material-icons">visibility</span>
                                </button>
                                <button class="btn btn-primary btn-small btn-icon" onclick="editMember('0000002')" title="編集">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button class="btn btn-secondary btn-small btn-icon" onclick="adjustOrganization('0000002')" title="組織調整">
                                    <span class="material-icons">account_tree</span>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="font-mono">0000003</span></td>
                            <td>山田 次郎</td>
                            <td><span class="status-badge status-inactive">休会中</span></td>
                            <td><span class="title-badge">ロード</span></td>
                            <td>テストプラン</td>
                            <td>銀行振込</td>
                            <td>2024/02/05</td>
                            <td class="action-buttons">
                                <button class="btn btn-secondary btn-small btn-icon" onclick="viewMember('0000003')" title="詳細表示">
                                    <span class="material-icons">visibility</span>
                                </button>
                                <button class="btn btn-primary btn-small btn-icon" onclick="editMember('0000003')" title="編集">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button class="btn btn-secondary btn-small btn-icon" onclick="adjustOrganization('0000003')" title="組織調整">
                                    <span class="material-icons">account_tree</span>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="font-mono">0000004</span></td>
                            <td>鈴木 美咲</td>
                            <td><span class="status-badge status-active">アクティブ</span></td>
                            <td><span class="title-badge">レディ</span></td>
                            <td>ヒーロープラン</td>
                            <td>インフォカート</td>
                            <td>2024/02/10</td>
                            <td class="action-buttons">
                                <button class="btn btn-secondary btn-small btn-icon" onclick="viewMember('0000004')" title="詳細表示">
                                    <span class="material-icons">visibility</span>
                                </button>
                                <button class="btn btn-primary btn-small btn-icon" onclick="editMember('0000004')" title="編集">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button class="btn btn-secondary btn-small btn-icon" onclick="adjustOrganization('0000004')" title="組織調整">
                                    <span class="material-icons">account_tree</span>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td><span class="font-mono">0000005</span></td>
                            <td>高橋 一郎</td>
                            <td><span class="status-badge status-withdrawn">退会済</span></td>
                            <td><span class="title-badge">称号なし</span></td>
                            <td>テストプラン</td>
                            <td>カード決済</td>
                            <td>2024/01/30</td>
                            <td class="action-buttons">
                                <button class="btn btn-secondary btn-small btn-icon" onclick="viewMember('0000005')" title="詳細表示">
                                    <span class="material-icons">visibility</span>
                                </button>
                                <button class="btn btn-primary btn-small btn-icon" onclick="editMember('0000005')" title="編集" disabled>
                                    <span class="material-icons">edit</span>
                                </button>
                                <button class="btn btn-secondary btn-small btn-icon" onclick="adjustOrganization('0000005')" title="組織調整">
                                    <span class="material-icons">account_tree</span>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
    
    <!-- 会員詳細/編集モーダル -->
    <div id="memberModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="modalTitle">会員詳細</h3>
                <button class="modal-close" onclick="closeMemberModal()">×</button>
            </div>
            <div class="modal-body">
                <form id="memberForm">
                    <div class="form-grid">
                        <!-- 基本情報 -->
                        <div class="form-group">
                            <label class="form-label">会員番号</label>
                            <input type="text" id="memberNumber" class="form-input" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ステータス</label>
                            <select id="status" class="form-input">
                                <option value="アクティブ">アクティブ</option>
                                <option value="休会中">休会中</option>
                                <option value="退会済">退会済</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">氏名</label>
                            <input type="text" id="name" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">カナ</label>
                            <input type="text" id="kana" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">メールアドレス</label>
                            <input type="email" id="email" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">称号</label>
                            <select id="title" class="form-input">
                                <option value="称号なし">称号なし</option>
                                <option value="ナイト/デイム">ナイト/デイム</option>
                                <option value="ロード/レディ">ロード/レディ</option>
                                <option value="キング/クイーン">キング/クイーン</option>
                                <option value="エンペラー/エンブレス">エンペラー/エンブレス</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">ユーザータイプ</label>
                            <select id="userType" class="form-input">
                                <option value="通常">通常</option>
                                <option value="注意">注意</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">プラン</label>
                            <select id="plan" class="form-input">
                                <option value="ヒーロープラン">ヒーロープラン</option>
                                <option value="テストプラン">テストプラン</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">決済方法</label>
                            <select id="paymentMethod" class="form-input">
                                <option value="カード決済">カード決済</option>
                                <option value="口座振替">口座振替</option>
                                <option value="銀行振込">銀行振込</option>
                                <option value="インフォカート">インフォカート</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">登録日</label>
                            <input type="date" id="registrationDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">退会日</label>
                            <input type="date" id="withdrawalDate" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">電話番号</label>
                            <input type="tel" id="phone" class="form-input">
                        </div>
                        <!-- 住所情報 -->
                        <div class="form-group">
                            <label class="form-label">郵便番号</label>
                            <input type="text" id="postalCode" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">都道府県</label>
                            <input type="text" id="prefecture" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">住所1</label>
                            <input type="text" id="address2" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">住所2</label>
                            <input type="text" id="address3" class="form-input">
                        </div>
                        <!-- 組織情報 -->
                        <div class="form-group">
                            <label class="form-label">アップライン会員番号</label>
                            <input type="text" id="uplineId" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">アップライン氏名</label>
                            <input type="text" id="uplineName" class="form-input" readonly>
                        </div>
                        <div class="form-group">
                            <label class="form-label">紹介者会員番号</label>
                            <input type="text" id="referrerId" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">紹介者氏名</label>
                            <input type="text" id="referrerName" class="form-input" readonly>
                        </div>
                        <!-- 銀行情報 -->
                        <div class="form-group">
                            <label class="form-label">銀行名</label>
                            <input type="text" id="bankName" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">銀行コード</label>
                            <input type="text" id="bankCode" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">支店名</label>
                            <input type="text" id="branchName" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">支店コード</label>
                            <input type="text" id="branchCode" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">口座番号</label>
                            <input type="text" id="accountNumber" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">口座種別</label>
                            <select id="accountType" class="form-input">
                                <option value="普通">普通</option>
                                <option value="当座">当座</option>
                            </select>
                        </div>
                        <!-- ゆうちょ銀行用 -->
                        <div class="form-group">
                            <label class="form-label">ゆうちょ記号</label>
                            <input type="text" id="yuchoSymbol" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ゆうちょ番号</label>
                            <input type="text" id="yuchoNumber" class="form-input">
                        </div>
                        <!-- 備考 -->
                        <div class="form-group" style="grid-column: 1 / -1;">
                            <label class="form-label">備考</label>
                            <textarea id="notes" class="form-input" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div style="margin-top: var(--spacing-xl); display: flex; justify-content: space-between;">
                        <div>
                            <button type="button" class="btn btn-secondary" onclick="closeMemberModal()">キャンセル</button>
                        </div>
                        <div style="display: flex; gap: var(--spacing-md);">
                            <button type="button" id="withdrawBtn" class="btn" style="background: var(--error); color: white;" onclick="withdrawMember()">退会処理</button>
                            <button type="submit" class="btn btn-primary">保存</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <script>
        <!--
        【CF_06引き継ぎ情報】
        UI要件: P-002会員管理ページ - 50名の会員データ完全管理、検索・フィルター、詳細編集、退会処理、組織調整
        必要API: 
        - GET /api/members - 会員一覧取得（検索条件付き）
        - GET /api/members/{member_id} - 会員詳細取得
        - POST /api/members - 新規会員登録
        - PUT /api/members/{member_id} - 会員情報更新
        - DELETE /api/members/{member_id} - 会員退会処理
        - GET /api/members/search - 会員検索（番号/氏名/メール）
        - PUT /api/members/{member_id}/sponsor - スポンサー変更（組織調整）
        入力データ: { 
            MemberModel: {
                member_number: string, status: string, name: string, kana: string,
                email: string, title: string, user_type: string, plan: string,
                payment_method: string, registration_date: string, withdrawal_date?: string,
                phone: string, gender: string, postal_code: string, prefecture: string,
                address2: string, address3: string, upline_id: string, upline_name: string,
                referrer_id: string, referrer_name: string, bank_name: string, bank_code: string,
                branch_name: string, branch_code: string, account_number: string,
                yucho_symbol?: string, yucho_number?: string, account_type: string, notes?: string
            }
        }
        出力データ: { MemberModel[], MemberDetailModel, SuccessResponse }
        UI文脈: 
        - 一覧画面：検索・フィルター機能、ページング、エクスポート
        - 詳細画面：30項目の編集フォーム、退会処理、組織調整
        - 組織調整：手動でのスポンサー変更（自動圧縮NG）
        特記事項: 
        - 検索対象：会員番号、氏名、メールアドレス
        - ステータス管理：アクティブ、休会中、退会済
        - 退会処理は論理削除、組織調整は手動実行
        - CSVエクスポート対応（Shift-JIS）
        -->
        
        // サンプルデータ（実装時はAPIから取得）
        let membersData = [
            {
                member_number: "0000001",
                name: "田中 太郎",
                kana: "タナカ タロウ",
                email: "tanaka@example.com",
                status: "アクティブ",
                title: "キング",
                user_type: "通常",
                plan: "ヒーロープラン",
                payment_method: "カード決済",
                registration_date: "2024-01-15",
                withdrawal_date: null,
                phone: "090-1234-5678",
                gender: "男性",
                postal_code: "100-0001",
                prefecture: "東京都",
                address2: "千代田区千代田1-1",
                address3: "千代田マンション101",
                upline_id: "",
                upline_name: "",
                referrer_id: "",
                referrer_name: "",
                bank_name: "三菱UFJ銀行",
                bank_code: "0005",
                branch_name: "東京支店",
                branch_code: "001",
                account_number: "1234567",
                yucho_symbol: "",
                yucho_number: "",
                account_type: "普通",
                notes: "最上位会員"
            },
            // 他のサンプルデータも同様に定義...
        ];
        
        let currentEditingMember = null;
        let isViewMode = false;
        
        // 検索・フィルター機能
        function filterMembers(searchTerm) {
            const tbody = document.getElementById('membersTableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let row of rows) {
                const memberNumber = row.cells[0].textContent;
                const name = row.cells[1].textContent;
                const visible = memberNumber.includes(searchTerm) || 
                               name.includes(searchTerm);
                row.style.display = visible ? '' : 'none';
            }
        }
        
        function filterByStatus(status) {
            const tbody = document.getElementById('membersTableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let row of rows) {
                const statusCell = row.cells[2].querySelector('.status-badge');
                const visible = !status || statusCell.textContent.trim() === status;
                row.style.display = visible ? '' : 'none';
            }
        }
        
        function filterByPlan(plan) {
            const tbody = document.getElementById('membersTableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let row of rows) {
                const planText = row.cells[4].textContent;
                const visible = !plan || planText.includes(plan);
                row.style.display = visible ? '' : 'none';
            }
        }
        
        function filterByPayment(method) {
            const tbody = document.getElementById('membersTableBody');
            const rows = tbody.getElementsByTagName('tr');
            
            for (let row of rows) {
                const paymentText = row.cells[5].textContent;
                const visible = !method || paymentText.includes(method);
                row.style.display = visible ? '' : 'none';
            }
        }
        
        // 会員詳細表示
        function viewMember(memberId) {
            isViewMode = true;
            currentEditingMember = memberId;
            
            // サンプルデータから会員情報を取得（実装時はAPI呼び出し）
            const member = membersData.find(m => m.member_number === memberId) || membersData[0];
            
            // モーダルタイトル設定
            document.getElementById('modalTitle').textContent = `会員詳細 - ${member.name}`;
            
            // フォームに値をセット
            populateForm(member);
            
            // 表示専用モードに設定
            setFormReadonly(true);
            document.getElementById('withdrawBtn').style.display = 'none';
            
            // モーダル表示
            document.getElementById('memberModal').classList.add('show');
        }
        
        // 会員編集
        function editMember(memberId) {
            isViewMode = false;
            currentEditingMember = memberId;
            
            // サンプルデータから会員情報を取得
            const member = membersData.find(m => m.member_number === memberId) || membersData[0];
            
            // モーダルタイトル設定
            document.getElementById('modalTitle').textContent = `会員編集 - ${member.name}`;
            
            // フォームに値をセット
            populateForm(member);
            
            // 編集モードに設定
            setFormReadonly(false);
            document.getElementById('withdrawBtn').style.display = member.status !== '退会済' ? 'inline-flex' : 'none';
            
            // モーダル表示
            document.getElementById('memberModal').classList.add('show');
        }
        
        // フォームに値を設定
        function populateForm(member) {
            document.getElementById('memberNumber').value = member.member_number;
            document.getElementById('status').value = member.status;
            document.getElementById('name').value = member.name;
            document.getElementById('kana').value = member.kana;
            document.getElementById('email').value = member.email;
            document.getElementById('title').value = member.title;
            document.getElementById('userType').value = member.user_type;
            document.getElementById('plan').value = member.plan;
            document.getElementById('paymentMethod').value = member.payment_method;
            document.getElementById('registrationDate').value = member.registration_date;
            document.getElementById('withdrawalDate').value = member.withdrawal_date || '';
            document.getElementById('phone').value = member.phone;
            document.getElementById('postalCode').value = member.postal_code;
            document.getElementById('prefecture').value = member.prefecture;
            document.getElementById('address2').value = member.address2;
            document.getElementById('address3').value = member.address3;
            document.getElementById('uplineId').value = member.upline_id;
            document.getElementById('uplineName').value = member.upline_name;
            document.getElementById('referrerId').value = member.referrer_id;
            document.getElementById('referrerName').value = member.referrer_name;
            document.getElementById('bankName').value = member.bank_name;
            document.getElementById('bankCode').value = member.bank_code;
            document.getElementById('branchName').value = member.branch_name;
            document.getElementById('branchCode').value = member.branch_code;
            document.getElementById('accountNumber').value = member.account_number;
            document.getElementById('yuchoSymbol').value = member.yucho_symbol || '';
            document.getElementById('yuchoNumber').value = member.yucho_number || '';
            document.getElementById('accountType').value = member.account_type;
            document.getElementById('notes').value = member.notes || '';
        }
        
        // フォームの読み取り専用設定
        function setFormReadonly(readonly) {
            const inputs = document.querySelectorAll('#memberForm input:not(#memberNumber), #memberForm select, #memberForm textarea');
            inputs.forEach(input => {
                input.readOnly = readonly;
                input.disabled = readonly;
            });
            
            const submitBtn = document.querySelector('#memberForm button[type="submit"]');
            submitBtn.style.display = readonly ? 'none' : 'inline-flex';
        }
        
        // モーダルを閉じる
        function closeMemberModal() {
            document.getElementById('memberModal').classList.remove('show');
            currentEditingMember = null;
            isViewMode = false;
        }
        
        // 組織調整
        function adjustOrganization(memberId) {
            alert(`組織調整機能：会員${memberId}のスポンサー変更画面を表示（実装予定）`);
        }
        
        // 退会処理
        function withdrawMember() {
            if (confirm('この会員を退会処理しますか？\n※組織調整が必要な場合があります。')) {
                alert('退会処理を実行しました。');
                closeMemberModal();
            }
        }
        
        // 新規会員登録
        function showAddMemberModal() {
            isViewMode = false;
            currentEditingMember = null;
            
            document.getElementById('modalTitle').textContent = '新規会員登録';
            
            // フォームをクリア
            document.getElementById('memberForm').reset();
            
            // 編集モードに設定
            setFormReadonly(false);
            document.getElementById('withdrawBtn').style.display = 'none';
            
            // モーダル表示
            document.getElementById('memberModal').classList.add('show');
        }
        
        // エクスポート
        function exportMembers() {
            alert('会員データをCSVでエクスポートします（実装予定）');
        }
        
        // フォーム送信処理
        document.getElementById('memberForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (isViewMode) return;
            
            const formData = new FormData(this);
            
            if (currentEditingMember) {
                alert('会員情報を更新しました。');
            } else {
                alert('新規会員を登録しました。');
            }
            
            closeMemberModal();
        });
        
        // モーダル外クリックで閉じる
        document.getElementById('memberModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeMemberModal();
            }
        });
    </script>
</body>
</html>